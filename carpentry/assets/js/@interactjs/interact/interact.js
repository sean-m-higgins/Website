/** @module interact */
import { Scope } from '@interactjs/core/scope';
import * as utils from '@interactjs/utils';
import browser from '@interactjs/utils/browser';
import events from '@interactjs/utils/events';
const globalEvents = {};
const scope = new Scope();
/**
 * ```js
 * interact('#draggable').draggable(true)
 *
 * var rectables = interact('rect')
 * rectables
 *   .gesturable(true)
 *   .on('gesturemove', function (event) {
 *       // ...
 *   })
 * ```
 *
 * The methods of this variable can be used to set elements as interactables
 * and also to change various default settings.
 *
 * Calling it as a function and passing an element or a valid CSS selector
 * string returns an Interactable object which has various methods to configure
 * it.
 *
 * @global
 *
 * @param {Element | string} target The HTML or SVG Element to interact with
 * or CSS selector
 * @return {Interactable}
 */
export const interact = function interact(target, options) {
    let interactable = scope.interactables.get(target, options);
    if (!interactable) {
        interactable = scope.interactables.new(target, options);
        interactable.events.global = globalEvents;
    }
    return interactable;
};
/**
 * Use a plugin
 *
 * @alias module:interact.use
 *
 * @param {Object} plugin
 * @param {function} plugin.install
 * @return {interact}
 */
interact.use = use;
function use(plugin, options) {
    scope.usePlugin(plugin, options);
    return interact;
}
/**
 * Check if an element or selector has been set with the {@link interact}
 * function
 *
 * @alias module:interact.isSet
 *
 * @param {Element} element The Element being searched for
 * @return {boolean} Indicates if the element or CSS selector was previously
 * passed to interact
 */
interact.isSet = isSet;
function isSet(target, options) {
    return !!scope.interactables.get(target, options && options.context);
}
/**
 * Add a global listener for an InteractEvent or adds a DOM event to `document`
 *
 * @alias module:interact.on
 *
 * @param {string | array | object} type The types of events to listen for
 * @param {function} listener The function event (s)
 * @param {object | boolean} [options] object or useCapture flag for
 * addEventListener
 * @return {object} interact
 */
interact.on = on;
function on(type, listener, options) {
    if (utils.is.string(type) && type.search(' ') !== -1) {
        type = type.trim().split(/ +/);
    }
    if (utils.is.array(type)) {
        for (const eventType of type) {
            interact.on(eventType, listener, options);
        }
        return interact;
    }
    if (utils.is.object(type)) {
        for (const prop in type) {
            interact.on(prop, type[prop], listener);
        }
        return interact;
    }
    // if it is an InteractEvent type, add listener to globalEvents
    if (utils.arr.contains(scope.actions.eventTypes, type)) {
        // if this type of event was never bound
        if (!globalEvents[type]) {
            globalEvents[type] = [listener];
        }
        else {
            globalEvents[type].push(listener);
        }
    }
    // If non InteractEvent type, addEventListener to document
    else {
        events.add(scope.document, type, listener, { options });
    }
    return interact;
}
/**
 * Removes a global InteractEvent listener or DOM event from `document`
 *
 * @alias module:interact.off
 *
 * @param {string | array | object} type The types of events that were listened
 * for
 * @param {function} listener The listener function to be removed
 * @param {object | boolean} options [options] object or useCapture flag for
 * removeEventListener
 * @return {object} interact
 */
interact.off = off;
function off(type, listener, options) {
    if (utils.is.string(type) && type.search(' ') !== -1) {
        type = type.trim().split(/ +/);
    }
    if (utils.is.array(type)) {
        for (const eventType of type) {
            interact.off(eventType, listener, options);
        }
        return interact;
    }
    if (utils.is.object(type)) {
        for (const prop in type) {
            interact.off(prop, type[prop], listener);
        }
        return interact;
    }
    if (!utils.arr.contains(scope.actions.eventTypes, type)) {
        events.remove(scope.document, type, listener, options);
    }
    else {
        let index;
        if (type in globalEvents &&
            (index = globalEvents[type].indexOf(listener)) !== -1) {
            globalEvents[type].splice(index, 1);
        }
    }
    return interact;
}
/**
 * Returns an object which exposes internal data
 * @alias module:interact.debug
 *
 * @return {object} An object with properties that outline the current state
 * and expose internal functions and variables
 */
interact.debug = debug;
function debug() {
    return scope;
}
// expose the functions used to calculate multi-touch properties
interact.getPointerAverage = utils.pointer.pointerAverage;
interact.getTouchBBox = utils.pointer.touchBBox;
interact.getTouchDistance = utils.pointer.touchDistance;
interact.getTouchAngle = utils.pointer.touchAngle;
interact.getElementRect = utils.dom.getElementRect;
interact.getElementClientRect = utils.dom.getElementClientRect;
interact.matchesSelector = utils.dom.matchesSelector;
interact.closest = utils.dom.closest;
/**
 * @alias module:interact.supportsTouch
 *
 * @return {boolean} Whether or not the browser supports touch input
 */
interact.supportsTouch = supportsTouch;
function supportsTouch() {
    return browser.supportsTouch;
}
/**
 * @alias module:interact.supportsPointerEvent
 *
 * @return {boolean} Whether or not the browser supports PointerEvents
 */
interact.supportsPointerEvent = supportsPointerEvent;
function supportsPointerEvent() {
    return browser.supportsPointerEvent;
}
/**
 * Cancels all interactions (end events are not fired)
 *
 * @alias module:interact.stop
 *
 * @return {object} interact
 */
interact.stop = stop;
function stop() {
    for (const interaction of scope.interactions.list) {
        interaction.stop();
    }
    return interact;
}
/**
 * Returns or sets the distance the pointer must be moved before an action
 * sequence occurs. This also affects tolerance for tap events.
 *
 * @alias module:interact.pointerMoveTolerance
 *
 * @param {number} [newValue] The movement from the start position must be greater than this value
 * @return {interact | number}
 */
interact.pointerMoveTolerance = pointerMoveTolerance;
function pointerMoveTolerance(newValue) {
    if (utils.is.number(newValue)) {
        scope.interactions.pointerMoveTolerance = newValue;
        return interact;
    }
    return scope.interactions.pointerMoveTolerance;
}
scope.interactables.signals.on('unset', ({ interactable }) => {
    scope.interactables.list.splice(scope.interactables.list.indexOf(interactable), 1);
    // Stop related interactions when an Interactable is unset
    for (const interaction of scope.interactions.list) {
        if (interaction.interactable === interactable && interaction.interacting() && interaction._ending) {
            interaction.stop();
        }
    }
});
interact.addDocument = (doc, options) => scope.addDocument(doc, options);
interact.removeDocument = (doc) => scope.removeDocument(doc);
scope.interact = interact;
export { scope };
export default interact;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZXJhY3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbnRlcmFjdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx1QkFBdUI7QUFJdkIsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLHdCQUF3QixDQUFBO0FBQzlDLE9BQU8sS0FBSyxLQUFLLE1BQU0sbUJBQW1CLENBQUE7QUFDMUMsT0FBTyxPQUFPLE1BQU0sMkJBQTJCLENBQUE7QUFDL0MsT0FBTyxNQUFNLE1BQU0sMEJBQTBCLENBQUE7QUFnQzdDLE1BQU0sWUFBWSxHQUFRLEVBQUUsQ0FBQTtBQUM1QixNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFBO0FBRXpCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F3Qkc7QUFDSCxNQUFNLENBQUMsTUFBTSxRQUFRLEdBQW1CLFNBQVMsUUFBUSxDQUFFLE1BQXVCLEVBQUUsT0FBYTtJQUMvRixJQUFJLFlBQVksR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUE7SUFFM0QsSUFBSSxDQUFDLFlBQVksRUFBRTtRQUNqQixZQUFZLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBQ3ZELFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQTtLQUMxQztJQUVELE9BQU8sWUFBWSxDQUFBO0FBQ3JCLENBQW1CLENBQUE7QUFFbkI7Ozs7Ozs7O0dBUUc7QUFDSCxRQUFRLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQTtBQUNsQixTQUFTLEdBQUcsQ0FBRSxNQUF1QixFQUFFLE9BQWdDO0lBQ3JFLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBRWhDLE9BQU8sUUFBUSxDQUFBO0FBQ2pCLENBQUM7QUFFRDs7Ozs7Ozs7O0dBU0c7QUFDSCxRQUFRLENBQUMsS0FB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LENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUU7SUFDM0QsS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUVsRiwwREFBMEQ7SUFDMUQsS0FBSyxNQUFNLFdBQVcsSUFBSSxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRTtRQUNqRCxJQUFJLFdBQVcsQ0FBQyxZQUFZLEtBQUssWUFBWSxJQUFJLFdBQVcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxXQUFXLENBQUMsT0FBTyxFQUFFO1lBQ2pHLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtTQUNuQjtLQUNGO0FBQ0gsQ0FBQyxDQUFDLENBQUE7QUFFRixRQUFRLENBQUMsV0FBVyxHQUFHLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUE7QUFDeEUsUUFBUSxDQUFDLGNBQWMsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUU1RCxLQUFLLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtBQUV6QixPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUE7QUFDaEIsZUFBZSxRQUFRLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQG1vZHVsZSBpbnRlcmFjdCAqL1xuXG5pbXBvcnQgeyBPcHRpb25zIH0gZnJvbSAnQGludGVyYWN0anMvY29yZS9kZWZhdWx0T3B0aW9ucydcbmltcG9ydCBJbnRlcmFjdGFibGUgZnJvbSAnQGludGVyYWN0anMvY29yZS9JbnRlcmFjdGFibGUnXG5pbXBvcnQgeyBTY29wZSB9IGZyb20gJ0BpbnRlcmFjdGpzL2NvcmUvc2NvcGUnXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICdAaW50ZXJhY3Rqcy91dGlscydcbmltcG9ydCBicm93c2VyIGZyb20gJ0BpbnRlcmFjdGpzL3V0aWxzL2Jyb3dzZXInXG5pbXBvcnQgZXZlbnRzIGZyb20gJ0BpbnRlcmFjdGpzL3V0aWxzL2V2ZW50cydcblxuZGVjbGFyZSBtb2R1bGUgJ0BpbnRlcmFjdGpzL2NvcmUvc2NvcGUnIHtcbiAgaW50ZXJmYWNlIFNjb3BlIHtcbiAgICBpbnRlcmFjdDogSW50ZXJhY3RTdGF0aWNcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEludGVyYWN0U3RhdGljIHtcbiAgKHRhcmdldDogSW50ZXJhY3QuVGFyZ2V0LCBvcHRpb25zPzogT3B0aW9ucyk6IEludGVyYWN0YWJsZVxuICBvbjogdHlwZW9mIG9uXG4gIHBvaW50ZXJNb3ZlVG9sZXJhbmNlOiB0eXBlb2YgcG9pbnRlck1vdmVUb2xlcmFuY2VcbiAgc3RvcDogdHlwZW9mIHN0b3BcbiAgc3VwcG9ydHNQb2ludGVyRXZlbnQ6IHR5cGVvZiBzdXBwb3J0c1BvaW50ZXJFdmVudFxuICBzdXBwb3J0c1RvdWNoOiB0eXBlb2Ygc3VwcG9ydHNUb3VjaFxuICBkZWJ1ZzogdHlwZW9mIGRlYnVnXG4gIG9mZjogdHlwZW9mIG9mZlxuICBpc1NldDogdHlwZW9mIGlzU2V0XG4gIHVzZTogdHlwZW9mIHVzZVxuICBnZXRQb2ludGVyQXZlcmFnZTogdHlwZW9mIHV0aWxzLnBvaW50ZXIucG9pbnRlckF2ZXJhZ2VcbiAgZ2V0VG91Y2hCQm94OiB0eXBlb2YgdXRpbHMucG9pbnRlci50b3VjaEJCb3hcbiAgZ2V0VG91Y2hEaXN0YW5jZTogdHlwZW9mIHV0aWxzLnBvaW50ZXIudG91Y2hEaXN0YW5jZVxuICBnZXRUb3VjaEFuZ2xlOiB0eXBlb2YgdXRpbHMucG9pbnRlci50b3VjaEFuZ2xlXG4gIGdldEVsZW1lbnRSZWN0OiB0eXBlb2YgdXRpbHMuZG9tLmdldEVsZW1lbnRSZWN0XG4gIGdldEVsZW1lbnRDbGllbnRSZWN0OiB0eXBlb2YgdXRpbHMuZG9tLmdldEVsZW1lbnRDbGllbnRSZWN0XG4gIG1hdGNoZXNTZWxlY3RvcjogdHlwZW9mIHV0aWxzLmRvbS5tYXRjaGVzU2VsZWN0b3JcbiAgY2xvc2VzdDogdHlwZW9mIHV0aWxzLmRvbS5jbG9zZXN0XG4gIGFkZERvY3VtZW50OiB0eXBlb2Ygc2NvcGUuYWRkRG9jdW1lbnRcbiAgcmVtb3ZlRG9jdW1lbnQ6IHR5cGVvZiBzY29wZS5yZW1vdmVEb2N1bWVudFxuICB2ZXJzaW9uOiBzdHJpbmdcbn1cblxuY29uc3QgZ2xvYmFsRXZlbnRzOiBhbnkgPSB7fVxuY29uc3Qgc2NvcGUgPSBuZXcgU2NvcGUoKVxuXG4vKipcbiAqIGBgYGpzXG4gKiBpbnRlcmFjdCgnI2RyYWdnYWJsZScpLmRyYWdnYWJsZSh0cnVlKVxuICpcbiAqIHZhciByZWN0YWJsZXMgPSBpbnRlcmFjdCgncmVjdCcpXG4gKiByZWN0YWJsZXNcbiAqICAgLmdlc3R1cmFibGUodHJ1ZSlcbiAqICAgLm9uKCdnZXN0dXJlbW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICogICAgICAgLy8gLi4uXG4gKiAgIH0pXG4gKiBgYGBcbiAqXG4gKiBUaGUgbWV0aG9kcyBvZiB0aGlzIHZhcmlhYmxlIGNhbiBiZSB1c2VkIHRvIHNldCBlbGVtZW50cyBhcyBpbnRlcmFjdGFibGVzXG4gKiBhbmQgYWxzbyB0byBjaGFuZ2UgdmFyaW91cyBkZWZhdWx0IHNldHRpbmdzLlxuICpcbiAqIENhbGxpbmcgaXQgYXMgYSBmdW5jdGlvbiBhbmQgcGFzc2luZyBhbiBlbGVtZW50IG9yIGEgdmFsaWQgQ1NTIHNlbGVjdG9yXG4gKiBzdHJpbmcgcmV0dXJucyBhbiBJbnRlcmFjdGFibGUgb2JqZWN0IHdoaWNoIGhhcyB2YXJpb3VzIG1ldGhvZHMgdG8gY29uZmlndXJlXG4gKiBpdC5cbiAqXG4gKiBAZ2xvYmFsXG4gKlxuICogQHBhcmFtIHtFbGVtZW50IHwgc3RyaW5nfSB0YXJnZXQgVGhlIEhUTUwgb3IgU1ZHIEVsZW1lbnQgdG8gaW50ZXJhY3Qgd2l0aFxuICogb3IgQ1NTIHNlbGVjdG9yXG4gKiBAcmV0dXJuIHtJbnRlcmFjdGFibGV9XG4gKi9cbmV4cG9ydCBjb25zdCBpbnRlcmFjdDogSW50ZXJhY3RTdGF0aWMgPSBmdW5jdGlvbiBpbnRlcmFjdCAodGFyZ2V0OiBJbnRlcmFjdC5UYXJnZXQsIG9wdGlvbnM/OiBhbnkpIHtcbiAgbGV0IGludGVyYWN0YWJsZSA9IHNjb3BlLmludGVyYWN0YWJsZXMuZ2V0KHRhcmdldCwgb3B0aW9ucylcblxuICBpZiAoIWludGVyYWN0YWJsZSkge1xuICAgIGludGVyYWN0YWJsZSA9IHNjb3BlLmludGVyYWN0YWJsZXMubmV3KHRhcmdldCwgb3B0aW9ucylcbiAgICBpbnRlcmFjdGFibGUuZXZlbnRzLmdsb2JhbCA9IGdsb2JhbEV2ZW50c1xuICB9XG5cbiAgcmV0dXJuIGludGVyYWN0YWJsZVxufSBhcyBJbnRlcmFjdFN0YXRpY1xuXG4vKipcbiAqIFVzZSBhIHBsdWdpblxuICpcbiAqIEBhbGlhcyBtb2R1bGU6aW50ZXJhY3QudXNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuICogQHBhcmFtIHtmdW5jdGlvbn0gcGx1Z2luLmluc3RhbGxcbiAqIEByZXR1cm4ge2ludGVyYWN0fVxuICovXG5pbnRlcmFjdC51c2UgPSB1c2VcbmZ1bmN0aW9uIHVzZSAocGx1Z2luOiBJbnRlcmFjdC5QbHVnaW4sIG9wdGlvbnM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9KSB7XG4gIHNjb3BlLnVzZVBsdWdpbihwbHVnaW4sIG9wdGlvbnMpXG5cbiAgcmV0dXJuIGludGVyYWN0XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBvciBzZWxlY3RvciBoYXMgYmVlbiBzZXQgd2l0aCB0aGUge0BsaW5rIGludGVyYWN0fVxuICogZnVuY3Rpb25cbiAqXG4gKiBAYWxpYXMgbW9kdWxlOmludGVyYWN0LmlzU2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IFRoZSBFbGVtZW50IGJlaW5nIHNlYXJjaGVkIGZvclxuICogQHJldHVybiB7Ym9vbGVhbn0gSW5kaWNhdGVzIGlmIHRoZSBlbGVtZW50IG9yIENTUyBzZWxlY3RvciB3YXMgcHJldmlvdXNseVxuICogcGFzc2VkIHRvIGludGVyYWN0XG4gKi9cbmludGVyYWN0LmlzU2V0ID0gaXNTZXRcbmZ1bmN0aW9uIGlzU2V0ICh0YXJnZXQ6IEVsZW1lbnQsIG9wdGlvbnM/OiBhbnkpIHtcbiAgcmV0dXJuICEhc2NvcGUuaW50ZXJhY3RhYmxlcy5nZXQodGFyZ2V0LCBvcHRpb25zICYmIG9wdGlvbnMuY29udGV4dClcbn1cblxuLyoqXG4gKiBBZGQgYSBnbG9iYWwgbGlzdGVuZXIgZm9yIGFuIEludGVyYWN0RXZlbnQgb3IgYWRkcyBhIERPTSBldmVudCB0byBgZG9jdW1lbnRgXG4gKlxuICogQGFsaWFzIG1vZHVsZTppbnRlcmFjdC5vblxuICpcbiAqIEBwYXJhbSB7c3RyaW5nIHwgYXJyYXkgfCBvYmplY3R9IHR5cGUgVGhlIHR5cGVzIG9mIGV2ZW50cyB0byBsaXN0ZW4gZm9yXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBsaXN0ZW5lciBUaGUgZnVuY3Rpb24gZXZlbnQgKHMpXG4gKiBAcGFyYW0ge29iamVjdCB8IGJvb2xlYW59IFtvcHRpb25zXSBvYmplY3Qgb3IgdXNlQ2FwdHVyZSBmbGFnIGZvclxuICogYWRkRXZlbnRMaXN0ZW5lclxuICogQHJldHVybiB7b2JqZWN0fSBpbnRlcmFjdFxuICovXG5pbnRlcmFjdC5vbiA9IG9uXG5mdW5jdGlvbiBvbiAodHlwZTogc3RyaW5nIHwgSW50ZXJhY3QuRXZlbnRUeXBlcywgbGlzdGVuZXI6IEludGVyYWN0Lkxpc3RlbmVyc0FyZywgb3B0aW9ucz8pIHtcbiAgaWYgKHV0aWxzLmlzLnN0cmluZyh0eXBlKSAmJiB0eXBlLnNlYXJjaCgnICcpICE9PSAtMSkge1xuICAgIHR5cGUgPSB0eXBlLnRyaW0oKS5zcGxpdCgvICsvKVxuICB9XG5cbiAgaWYgKHV0aWxzLmlzLmFycmF5KHR5cGUpKSB7XG4gICAgZm9yIChjb25zdCBldmVudFR5cGUgb2YgKHR5cGUgYXMgYW55W10pKSB7XG4gICAgICBpbnRlcmFjdC5vbihldmVudFR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKVxuICAgIH1cblxuICAgIHJldHVybiBpbnRlcmFjdFxuICB9XG5cbiAgaWYgKHV0aWxzLmlzLm9iamVjdCh0eXBlKSkge1xuICAgIGZvciAoY29uc3QgcHJvcCBpbiB0eXBlKSB7XG4gICAgICBpbnRlcmFjdC5vbihwcm9wLCAodHlwZSBhcyBJbnRlcmFjdC5FdmVudFR5cGVzKVtwcm9wXSwgbGlzdGVuZXIpXG4gICAgfVxuXG4gICAgcmV0dXJuIGludGVyYWN0XG4gIH1cblxuICAvLyBpZiBpdCBpcyBhbiBJbnRlcmFjdEV2ZW50IHR5cGUsIGFkZCBsaXN0ZW5lciB0byBnbG9iYWxFdmVudHNcbiAgaWYgKHV0aWxzLmFyci5jb250YWlucyhzY29wZS5hY3Rpb25zLmV2ZW50VHlwZXMsIHR5cGUpKSB7XG4gICAgLy8gaWYgdGhpcyB0eXBlIG9mIGV2ZW50IHdhcyBuZXZlciBib3VuZFxuICAgIGlmICghZ2xvYmFsRXZlbnRzW3R5cGVdKSB7XG4gICAgICBnbG9iYWxFdmVudHNbdHlwZV0gPSBbbGlzdGVuZXJdXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZ2xvYmFsRXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpXG4gICAgfVxuICB9XG4gIC8vIElmIG5vbiBJbnRlcmFjdEV2ZW50IHR5cGUsIGFkZEV2ZW50TGlzdGVuZXIgdG8gZG9jdW1lbnRcbiAgZWxzZSB7XG4gICAgZXZlbnRzLmFkZChzY29wZS5kb2N1bWVudCwgdHlwZSwgbGlzdGVuZXIgYXMgSW50ZXJhY3QuTGlzdGVuZXIsIHsgb3B0aW9ucyB9KVxuICB9XG5cbiAgcmV0dXJuIGludGVyYWN0XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhIGdsb2JhbCBJbnRlcmFjdEV2ZW50IGxpc3RlbmVyIG9yIERPTSBldmVudCBmcm9tIGBkb2N1bWVudGBcbiAqXG4gKiBAYWxpYXMgbW9kdWxlOmludGVyYWN0Lm9mZlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nIHwgYXJyYXkgfCBvYmplY3R9IHR5cGUgVGhlIHR5cGVzIG9mIGV2ZW50cyB0aGF0IHdlcmUgbGlzdGVuZWRcbiAqIGZvclxuICogQHBhcmFtIHtmdW5jdGlvbn0gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIGJlIHJlbW92ZWRcbiAqIEBwYXJhbSB7b2JqZWN0IHwgYm9vbGVhbn0gb3B0aW9ucyBbb3B0aW9uc10gb2JqZWN0IG9yIHVzZUNhcHR1cmUgZmxhZyBmb3JcbiAqIHJlbW92ZUV2ZW50TGlzdGVuZXJcbiAqIEByZXR1cm4ge29iamVjdH0gaW50ZXJhY3RcbiAqL1xuaW50ZXJhY3Qub2ZmID0gb2ZmXG5mdW5jdGlvbiBvZmYgKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gIGlmICh1dGlscy5pcy5zdHJpbmcodHlwZSkgJiYgdHlwZS5zZWFyY2goJyAnKSAhPT0gLTEpIHtcbiAgICB0eXBlID0gdHlwZS50cmltKCkuc3BsaXQoLyArLylcbiAgfVxuXG4gIGlmICh1dGlscy5pcy5hcnJheSh0eXBlKSkge1xuICAgIGZvciAoY29uc3QgZXZlbnRUeXBlIG9mIHR5cGUpIHtcbiAgICAgIGludGVyYWN0Lm9mZihldmVudFR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKVxuICAgIH1cblxuICAgIHJldHVybiBpbnRlcmFjdFxuICB9XG5cbiAgaWYgKHV0aWxzLmlzLm9iamVjdCh0eXBlKSkge1xuICAgIGZvciAoY29uc3QgcHJvcCBpbiB0eXBlKSB7XG4gICAgICBpbnRlcmFjdC5vZmYocHJvcCwgdHlwZVtwcm9wXSwgbGlzdGVuZXIpXG4gICAgfVxuXG4gICAgcmV0dXJuIGludGVyYWN0XG4gIH1cblxuICBpZiAoIXV0aWxzLmFyci5jb250YWlucyhzY29wZS5hY3Rpb25zLmV2ZW50VHlwZXMsIHR5cGUpKSB7XG4gICAgZXZlbnRzLnJlbW92ZShzY29wZS5kb2N1bWVudCwgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpXG4gIH1cbiAgZWxzZSB7XG4gICAgbGV0IGluZGV4XG5cbiAgICBpZiAodHlwZSBpbiBnbG9iYWxFdmVudHMgJiZcbiAgICAgICAgKGluZGV4ID0gZ2xvYmFsRXZlbnRzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpKSAhPT0gLTEpIHtcbiAgICAgIGdsb2JhbEV2ZW50c1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGludGVyYWN0XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3Qgd2hpY2ggZXhwb3NlcyBpbnRlcm5hbCBkYXRhXG4gKiBAYWxpYXMgbW9kdWxlOmludGVyYWN0LmRlYnVnXG4gKlxuICogQHJldHVybiB7b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHRoYXQgb3V0bGluZSB0aGUgY3VycmVudCBzdGF0ZVxuICogYW5kIGV4cG9zZSBpbnRlcm5hbCBmdW5jdGlvbnMgYW5kIHZhcmlhYmxlc1xuICovXG5pbnRlcmFjdC5kZWJ1ZyA9IGRlYnVnXG5mdW5jdGlvbiBkZWJ1ZyAoKSB7XG4gIHJldHVybiBzY29wZVxufVxuXG4vLyBleHBvc2UgdGhlIGZ1bmN0aW9ucyB1c2VkIHRvIGNhbGN1bGF0ZSBtdWx0aS10b3VjaCBwcm9wZXJ0aWVzXG5pbnRlcmFjdC5nZXRQb2ludGVyQXZlcmFnZSAgPSB1dGlscy5wb2ludGVyLnBvaW50ZXJBdmVyYWdlXG5pbnRlcmFjdC5nZXRUb3VjaEJCb3ggICAgICAgPSB1dGlscy5wb2ludGVyLnRvdWNoQkJveFxuaW50ZXJhY3QuZ2V0VG91Y2hEaXN0YW5jZSAgID0gdXRpbHMucG9pbnRlci50b3VjaERpc3RhbmNlXG5pbnRlcmFjdC5nZXRUb3VjaEFuZ2xlICAgICAgPSB1dGlscy5wb2ludGVyLnRvdWNoQW5nbGVcblxuaW50ZXJhY3QuZ2V0RWxlbWVudFJlY3QgICAgICAgPSB1dGlscy5kb20uZ2V0RWxlbWVudFJlY3RcbmludGVyYWN0LmdldEVsZW1lbnRDbGllbnRSZWN0ID0gdXRpbHMuZG9tLmdldEVsZW1lbnRDbGllbnRSZWN0XG5pbnRlcmFjdC5tYXRjaGVzU2VsZWN0b3IgICAgICA9IHV0aWxzLmRvbS5tYXRjaGVzU2VsZWN0b3JcbmludGVyYWN0LmNsb3Nlc3QgICAgICAgICAgICAgID0gdXRpbHMuZG9tLmNsb3Nlc3RcblxuLyoqXG4gKiBAYWxpYXMgbW9kdWxlOmludGVyYWN0LnN1cHBvcnRzVG91Y2hcbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgYnJvd3NlciBzdXBwb3J0cyB0b3VjaCBpbnB1dFxuICovXG5pbnRlcmFjdC5zdXBwb3J0c1RvdWNoID0gc3VwcG9ydHNUb3VjaFxuZnVuY3Rpb24gc3VwcG9ydHNUb3VjaCAoKSB7XG4gIHJldHVybiBicm93c2VyLnN1cHBvcnRzVG91Y2hcbn1cblxuLyoqXG4gKiBAYWxpYXMgbW9kdWxlOmludGVyYWN0LnN1cHBvcnRzUG9pbnRlckV2ZW50XG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIGJyb3dzZXIgc3VwcG9ydHMgUG9pbnRlckV2ZW50c1xuICovXG5pbnRlcmFjdC5zdXBwb3J0c1BvaW50ZXJFdmVudCA9IHN1cHBvcnRzUG9pbnRlckV2ZW50XG5mdW5jdGlvbiBzdXBwb3J0c1BvaW50ZXJFdmVudCAoKSB7XG4gIHJldHVybiBicm93c2VyLnN1cHBvcnRzUG9pbnRlckV2ZW50XG59XG5cbi8qKlxuICogQ2FuY2VscyBhbGwgaW50ZXJhY3Rpb25zIChlbmQgZXZlbnRzIGFyZSBub3QgZmlyZWQpXG4gKlxuICogQGFsaWFzIG1vZHVsZTppbnRlcmFjdC5zdG9wXG4gKlxuICogQHJldHVybiB7b2JqZWN0fSBpbnRlcmFjdFxuICovXG5pbnRlcmFjdC5zdG9wID0gc3RvcFxuZnVuY3Rpb24gc3RvcCAoKSB7XG4gIGZvciAoY29uc3QgaW50ZXJhY3Rpb24gb2Ygc2NvcGUuaW50ZXJhY3Rpb25zLmxpc3QpIHtcbiAgICBpbnRlcmFjdGlvbi5zdG9wKClcbiAgfVxuXG4gIHJldHVybiBpbnRlcmFjdFxufVxuXG4vKipcbiAqIFJldHVybnMgb3Igc2V0cyB0aGUgZGlzdGFuY2UgdGhlIHBvaW50ZXIgbXVzdCBiZSBtb3ZlZCBiZWZvcmUgYW4gYWN0aW9uXG4gKiBzZXF1ZW5jZSBvY2N1cnMuIFRoaXMgYWxzbyBhZmZlY3RzIHRvbGVyYW5jZSBmb3IgdGFwIGV2ZW50cy5cbiAqXG4gKiBAYWxpYXMgbW9kdWxlOmludGVyYWN0LnBvaW50ZXJNb3ZlVG9sZXJhbmNlXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtuZXdWYWx1ZV0gVGhlIG1vdmVtZW50IGZyb20gdGhlIHN0YXJ0IHBvc2l0aW9uIG11c3QgYmUgZ3JlYXRlciB0aGFuIHRoaXMgdmFsdWVcbiAqIEByZXR1cm4ge2ludGVyYWN0IHwgbnVtYmVyfVxuICovXG5pbnRlcmFjdC5wb2ludGVyTW92ZVRvbGVyYW5jZSA9IHBvaW50ZXJNb3ZlVG9sZXJhbmNlXG5mdW5jdGlvbiBwb2ludGVyTW92ZVRvbGVyYW5jZSAobmV3VmFsdWUpIHtcbiAgaWYgKHV0aWxzLmlzLm51bWJlcihuZXdWYWx1ZSkpIHtcbiAgICBzY29wZS5pbnRlcmFjdGlvbnMucG9pbnRlck1vdmVUb2xlcmFuY2UgPSBuZXdWYWx1ZVxuXG4gICAgcmV0dXJuIGludGVyYWN0XG4gIH1cblxuICByZXR1cm4gc2NvcGUuaW50ZXJhY3Rpb25zLnBvaW50ZXJNb3ZlVG9sZXJhbmNlXG59XG5cbnNjb3BlLmludGVyYWN0YWJsZXMuc2lnbmFscy5vbigndW5zZXQnLCAoeyBpbnRlcmFjdGFibGUgfSkgPT4ge1xuICBzY29wZS5pbnRlcmFjdGFibGVzLmxpc3Quc3BsaWNlKHNjb3BlLmludGVyYWN0YWJsZXMubGlzdC5pbmRleE9mKGludGVyYWN0YWJsZSksIDEpXG5cbiAgLy8gU3RvcCByZWxhdGVkIGludGVyYWN0aW9ucyB3aGVuIGFuIEludGVyYWN0YWJsZSBpcyB1bnNldFxuICBmb3IgKGNvbnN0IGludGVyYWN0aW9uIG9mIHNjb3BlLmludGVyYWN0aW9ucy5saXN0KSB7XG4gICAgaWYgKGludGVyYWN0aW9uLmludGVyYWN0YWJsZSA9PT0gaW50ZXJhY3RhYmxlICYmIGludGVyYWN0aW9uLmludGVyYWN0aW5nKCkgJiYgaW50ZXJhY3Rpb24uX2VuZGluZykge1xuICAgICAgaW50ZXJhY3Rpb24uc3RvcCgpXG4gICAgfVxuICB9XG59KVxuXG5pbnRlcmFjdC5hZGREb2N1bWVudCA9IChkb2MsIG9wdGlvbnMpID0+IHNjb3BlLmFkZERvY3VtZW50KGRvYywgb3B0aW9ucylcbmludGVyYWN0LnJlbW92ZURvY3VtZW50ID0gKGRvYykgPT4gc2NvcGUucmVtb3ZlRG9jdW1lbnQoZG9jKVxuXG5zY29wZS5pbnRlcmFjdCA9IGludGVyYWN0XG5cbmV4cG9ydCB7IHNjb3BlIH1cbmV4cG9ydCBkZWZhdWx0IGludGVyYWN0XG4iXX0=